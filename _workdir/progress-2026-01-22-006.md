---
date: 2026-01-22
session: bench-queries-runner
objective: Create shell script to run all 200 benchmark queries and fix failures
status: completed
---

# Benchmark Query Runner and Production Code Fixes

## Objective
Create a shell script `run_queries_part1.sh` to run all 200 queries from `bench/grism_queries_part1.py` and fix any failures by updating production code rather than workarounds.

## Completed
- Created `bench/run_queries_part1.sh` shell script
- Created `bench/run_queries_part1_runner.py` Python runner with logical plan capture
- Fixed `GroupedFrame` wrapping in runner to properly intercept query chains
- Added `count`, `exists` interception to `FrameCapture`
- Patched module-level `shortest_path` and `all_paths` functions for capture
- Added `explode` method to `PyNodeFrame` in production code
- All 200 queries now pass logical plan generation

## Files Changed
- `bench/run_queries_part1.sh` - New shell script to run queries
- `bench/run_queries_part1_runner.py` - New Python runner with capture logic
- `src/python/hypergraph.rs` - Added `explode` method to `PyNodeFrame`

## Tests
- Total: 201 passed, 0 failed (pytest)
- Benchmark: 200/200 queries pass logical plan generation

## Notes
- The runner uses `FrameCapture` and `GroupedFrameCapture` wrappers to intercept `.collect()`, `.first()`, `.count()`, and `.exists()` calls
- `explode` is implemented as a Project with a UDF expression, following the existing pattern for function expressions
- Module-level functions (`shortest_path`, `all_paths`) required special patching since they're not accessed through `HypergraphCapture`

## Next Steps
- None for this task; all queries pass
