---
date: 2026-01-21
session: python-api-v0-1-polish
objective: Polish Python API v0.1 spec and create Cypher query equivalents
status: completed
---

## Objective

Polish the Python API specification (2_python_api_v0.1.md) to:
1. Comply with current architecture design and related RFCs
2. Optimize UX Python API for stable version - make it complete as final version
3. Create equivalent Python test cases for cypher_queries_part1.txt

## Completed

- [x] Completely rewrote `specs/2_python_api_v0.1.md` to be comprehensive
- [x] Aligned API with `1_arch_design_v1.md` architecture document
- [x] Followed naming conventions from `rfc-namings.md`
- [x] Added complete Frame base class with all operations
- [x] Added all Frame types: NodeFrame, EdgeFrame, HyperedgeFrame, PathFrame
- [x] Added GroupedFrame for aggregation operations
- [x] Added Pattern matching and path query support
- [x] Added comprehensive expression system
- [x] Added all aggregation functions
- [x] Added mutation API with transaction support
- [x] Added execution backends (LocalExecutor, RayExecutor)
- [x] Added schema and type information classes
- [x] Added error types
- [x] Added 12+ canonical usage examples
- [x] Created `bench/grism_queries_part1.py` with 200 query equivalents

## Files Changed

| File | Description |
|------|-------------|
| `specs/2_python_api_v0.1.md` | Complete rewrite of Python API spec (~3500 lines) |
| `bench/grism_queries_part1.py` | 200 Grism Python API equivalents for Cypher queries (~2200 lines) |

## Key API Additions

### Frame Operations
- `filter()`, `where()` - Filtering
- `select()`, `with_column()`, `with_columns()`, `drop()`, `rename()` - Projection
- `order_by()`, `sort()`, `limit()`, `offset()`, `skip()`, `head()`, `tail()` - Ordering
- `distinct()`, `unique()` - Deduplication
- `group_by()`, `groupby()` - Grouping
- `union()`, `intersect()`, `except_()` - Set operations
- `explode()`, `unwind()` - Array operations
- `collect()`, `to_list()`, `to_pandas()`, `to_arrow()`, `to_polars()` - Execution

### NodeFrame
- `expand()` - Graph traversal with hops, direction, aliases
- `optional_expand()` - Optional match (left outer join)
- `neighbors()` - Immediate neighbors
- `in_edges()`, `out_edges()` - Edge access
- `degree()` - Node degree

### Expression System
- Comparison operators: `==`, `!=`, `>`, `>=`, `<`, `<=`
- Logical operators: `&`, `|`, `~`
- Arithmetic operators: `+`, `-`, `*`, `/`, `%`
- String methods: `contains()`, `starts_with()`, `ends_with()`, `matches()`, `like()`, etc.
- Date functions: `date()`, `timestamp()`, `year()`, `month()`, `day()`, etc.
- Collection functions: `size()`, `get()`, `keys()`, `values()`, etc.
- Graph functions: `labels()`, `type_()`, `properties()`, `nodes()`, `relationships()`, etc.

### Path Queries
- `shortest_path()` - Find shortest paths
- `all_paths()` - Find all paths within constraints
- `Pattern` class - Pattern matching builder

### Aggregations
- `count()`, `count_distinct()`, `sum_()`, `avg()`, `min_()`, `max_()`
- `collect()`, `collect_distinct()`, `first()`, `last()`
- `stddev()`, `variance()`, `percentile()`, `median()`, `mode()`
- `string_agg()`

## Tests

No automated tests added. The Python query file serves as specification examples.

## Notes

- The API follows hypergraph-first semantics per RFC-0001 and RFC-0002
- Expression system follows RFC-0003 type model
- Mutation API follows RFC-0017 transaction semantics
- All naming follows rfc-namings.md conventions
- The 200 query examples cover all major Cypher patterns:
  - Basic MATCH, WHERE, RETURN
  - Multi-hop traversal with variable-length paths
  - Aggregations with GROUP BY
  - UNION, EXISTS, OPTIONAL MATCH
  - Pattern matching, shortest path
  - String pattern matching
  - Date/time operations

## Next Steps

- Implement the Python API in `src/python/` module
- Add unit tests for the API
- Implement expression lowering to Rust LogicalPlan
